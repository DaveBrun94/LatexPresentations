%Remove navigation bar

\setbeamertemplate{navigation symbols}{}

%Title page template
\RequirePackage{tikz}

\defbeamertemplate*{title page}{desy}{
    %%Top half of desy like balls
    \begin{minipage}{\textwidth}
        \centering
        \begin{tikzpicture}[scale=1.2]
                \draw[thick, desyBlue] (0, 0.6) -- (0, 2.0);
                \filldraw[desyBlue] (0,2.0) circle (10pt);

                \draw[thick, desyBlue] (0.5, 0.5) -- (2.1, 1.7);
                \filldraw[desyBlue] (2.1,1.7) circle (4pt);

                \draw[thick, desyBlue] (-0.5, 0.5) -- (-2.1, 1.7);
                \filldraw[desyBlue] (-2.1,1.7) circle (6pt);
        \end{tikzpicture}
    \end{minipage}

    %%Main title
    \begin{minipage}{\textwidth}
        \centering
        \usebeamerfont{title}\usebeamercolor[fg]{title} \title
    \end{minipage}
              
    %%Lower half of desy like balls
    \begin{minipage}{\textwidth}
        \centering
        \begin{tikzpicture}[scale=1.2]
                \draw[thick, desyBlue] (0, -0.6) -- (0, -2.0);
                \filldraw[desyBlue] (0,-2.0) circle (10pt);
     
                \draw[thick, desyBlue] (-0.5, -0.5) -- (-2.1, -1.7);
                \filldraw[desyBlue] (-2.1,-1.7) circle (4pt);

                \draw[thick, desyBlue] (0.5, -0.5) -- (2.1, -1.7);
                \filldraw[desyBlue] (2.1,-1.7) circle (6pt);
        \end{tikzpicture}
    \end{minipage}

    \begin{columns}
        %%DESY Logo
        \begin{column}{0.1\textwidth}
            \centering
            \includegraphics[width=1.4\textwidth]{Logos/DESY.eps}
        \end{column}

        \begin{column}{0.8\textwidth}
            %%Meeting name
            \vspace*{0.5cm}

            \begin{minipage}{\textwidth}
                \centering
                \usebeamerfont{subtitle}\usebeamercolor[fg]{subtitle} \meeting
            \end{minipage}

            %%Author information
            \vspace*{0.5cm}

            \foreach \x in {\underline{\bfseries{\mainAuthor}}, \otherAuthors, \affiliation, \time}{
                \begin{minipage}{\textwidth}
                    \centering
                    \usebeamerfont{titletext}\usebeamercolor[fg]{titletext} \x
                \end{minipage}
            }
        \end{column}

        %%CMS Logo
        \begin{column}{0.1\textwidth}
            \includegraphics[width=1.4\textwidth]{Logos/CMS.eps}
        \end{column}
    \end{columns}
}

%Section page template
\AtBeginSection[]{
    {
    \setbeamertemplate{footline}{} 

    \begin{frame}
        \hspace*{4cm}
        \begin{tikzpicture}
            \draw[thick, desyBlue] (0, 0) -- (0, -20);
            \filldraw[desyBlue] (0, 0) circle (8pt);
            \draw (0, -4) node[anchor=west]{
                \begin{minipage}{\textwidth}
                    \tableofcontents[sectionstyle=show/shaded] 
                \end{minipage}
            };
        \end{tikzpicture}
    \end{frame}

    \addtocounter{framenumber}{-1}
    }
}

%Itemize templates
\setbeamertemplate{itemize item}[circle]
\setbeamercolor*{itemize item}{fg=desyOrange}
